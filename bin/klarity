#!/usr/bin/env ruby
# frozen_string_literal: true

$LOAD_PATH.unshift(File.expand_path('../lib', __dir__))

require 'klarity'

begin
  require 'klarity/cli'
  result = Klarity::CLI.new(ARGV).run

  if result.is_a?(String)
    puts result
  elsif result
    puts result.inspect
  end
rescue Klarity::CLIError => e
  warn "Error: #{e.message}"
  exit 1
rescue Interrupt
  puts "\nInterrupted"
  exit 130
end
